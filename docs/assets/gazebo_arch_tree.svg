<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1500" height="720" viewBox="0 0 1500 720">
<defs>
  <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto">
    <path d="M 0 0 L 10 5 L 0 10 z" fill="#333"/>
  </marker>
</defs>
<rect x="0" y="0" width="1500" height="720" fill="white"/>

<!-- System plugin internals frame -->
<g>
  <rect x="700" y="20" width="760" height="430"
        fill="none" stroke="#999" stroke-width="2" stroke-dasharray="6 6" rx="12" ry="12"/>
  <text x="714" y="46" font-family="Arial, sans-serif" font-size="15" fill="#333">System plugin</text>
</g>

<!-- edges from Gazebo Sim -->
<path d="M 310 280.0 L 345.0 280.0 L 345.0 150.0 L 380 150.0" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
<path d="M 310 280.0 L 380 270.0" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
<path d="M 310 280.0 L 345.0 280.0 L 345.0 390.0 L 380 390.0" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
<path d="M 310 280.0 L 345.0 280.0 L 345.0 510.0 L 380 510.0" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
<!-- direct gz-transport below gz-physics -->
<path d="M 310 280.0 L 345.0 280.0 L 345.0 630.0 L 380 630.0" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

<!-- edges from System plugin to internals -->
<path d="M 630 150.0 L 685.0 150.0 L 685.0 80.0 L 740 80.0" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
<path d="M 630 150.0 L 685.0 150.0 L 685.0 160.0 L 740 160.0" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

<!-- gz-transport detail box (moved to right side) -->
<path d="M 990 160.0 L 1120 160.0" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

<path d="M 630 150.0 L 685.0 150.0 L 685.0 340.0 L 740 340.0" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

<!-- ROS -> bridge / rclcpp -->
<path d="M 990 340.0 L 1055.0 340.0 L 1055.0 320.0 L 1120 320.0" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
<path d="M 990 340.0 L 1055.0 340.0 L 1055.0 410.0 L 1120 410.0" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

<!-- nodes -->
<g>
  <rect x="60" y="250" width="250" height="60" rx="10" ry="10" fill="#f7f7f7" stroke="#111" stroke-width="2.8"/>
  <text x="185.0" y="286.0" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" fill="#111">Gazebo Sim</text>
</g>

<g>
  <rect x="380" y="120" width="250" height="60" rx="10" ry="10" fill="#f7f7f7" stroke="#333" stroke-width="2"/>
  <text x="505.0" y="156.0" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" fill="#111">System</text>
</g>

<g>
  <rect x="380" y="240" width="250" height="60" rx="10" ry="10" fill="#f7f7f7" stroke="#333" stroke-width="2"/>
  <text x="505.0" y="276.0" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" fill="#111">gz-gui</text>
</g>

<g>
  <rect x="380" y="360" width="250" height="60" rx="10" ry="10" fill="#f7f7f7" stroke="#333" stroke-width="2"/>
  <text x="505.0" y="396.0" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" fill="#111">gz-rendering</text>
</g>

<g>
  <rect x="380" y="480" width="250" height="60" rx="10" ry="10" fill="#f7f7f7" stroke="#333" stroke-width="2"/>
  <text x="505.0" y="516.0" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" fill="#111">gz-physics</text>
</g>

<!-- direct gz-transport below gz-physics -->
<g>
  <rect x="380" y="600" width="250" height="60" rx="10" ry="10" fill="#f7f7f7" stroke="#333" stroke-width="2"/>
  <text x="505.0" y="636.0" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" fill="#111">gz-transport</text>
</g>

<g>
  <rect x="740" y="50" width="250" height="60" rx="10" ry="10" fill="#f7f7f7" stroke="#333" stroke-width="2"/>
  <text x="865.0" y="86.0" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" fill="#111">Entity Component Manager (ECM)</text>
</g>

<g>
  <rect x="740" y="130" width="250" height="60" rx="10" ry="10" fill="#f7f7f7" stroke="#333" stroke-width="2"/>
  <text x="865.0" y="156.0" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" fill="#111">gz-transport</text>
  <text x="865.0" y="174.0" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" fill="#111">(topics/services)</text>
</g>

<!-- moved detail box to right side of gz-transport -->
<g>
  <rect x="1120" y="130" width="250" height="60" rx="10" ry="10" fill="#fffdf0" stroke="#888" stroke-width="1.8"/>
  <text x="1245.0" y="156.0" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" fill="#111">publisher/subscriber, server/client</text>
  <text x="1245.0" y="174.0" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" fill="#111">supported in Python/C++</text>
</g>

<g>
  <rect x="740" y="310" width="250" height="60" rx="10" ry="10" fill="#f7f7f7" stroke="#333" stroke-width="2"/>
  <text x="865.0" y="346.0" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" fill="#111">ROS communication</text>
</g>

<g>
  <rect x="1120" y="290" width="250" height="60" rx="10" ry="10" fill="#f7f7f7" stroke="#333" stroke-width="2"/>
  <text x="1245.0" y="326.0" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" fill="#111">gz-bridge</text>
</g>

<g>
  <rect x="1120" y="380" width="250" height="60" rx="10" ry="10" fill="#f7f7f7" stroke="#333" stroke-width="2"/>
  <text x="1245.0" y="416.0" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" fill="#111">Direct ROS (rclcpp)</text>
</g>

<!-- bottom note -->
<g>
  <rect x="60" y="670" width="820" height="40" rx="10" ry="10" fill="#fffdf0" stroke="#888" stroke-width="1.8"/>
  <text x="470.0" y="696.0" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" fill="#111">
    gz-gui, gz-rendering, gz-physics actually just read/write on components
  </text>
</g>

</svg>
